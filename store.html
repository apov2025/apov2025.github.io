<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#ffffff">
<title>apov.sg/store</title>

<!-- Favicons -->
<link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/apple-touch-icon.png">
<link rel="manifest" href="site.webmanifest">

<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=Noto+Serif+SC:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #ffffff;
  --surface: #ffffff;
  --surface2: #f5f5f5;
  --border: #d5cfc5;
  --accent: #6a7a5a;
  --accent-dim: #5a6a4a;
  --accent-gold: #D4A574;
  --text: #2c2c2c;
  --text-dim: #8a8578;
  --amber: #b8860b;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'IBM Plex Mono', 'Noto Serif SC', monospace;
  line-height: 1.6;
  overflow-x: hidden;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at center, transparent 65%, rgba(200,190,175,0.3) 100%);
  pointer-events: none;
  z-index: 9998;
}

::selection { background: var(--accent); color: #fff; }
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

header {
  border-bottom: none;
  padding: 1.5rem 2rem;
  padding-top: max(1.5rem, env(safe-area-inset-top));
  display: flex;
  justify-content: center;
  align-items: center;
  position: sticky;
  top: 0;
  background: var(--bg);
  z-index: 100;
}

header::before {
  content: '';
  position: absolute;
  top: calc(-1 * env(safe-area-inset-top));
  left: 0;
  right: 0;
  height: env(safe-area-inset-top);
  background: var(--bg);
  z-index: -1;
}

.logo {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  font-weight: 400;
  letter-spacing: -0.02em;
  color: var(--text);
}

.logo a {
  color: var(--text);
  text-decoration: none;
  transition: color 0.3s ease;
}

.logo a:hover {
  color: var(--accent-gold);
  text-decoration: none;
}

.logo .store-part {
  color: var(--accent-gold);
  font-weight: 500;
  text-decoration: none;
  transition: opacity 0.3s ease;
}

.logo .store-part:hover {
  opacity: 0.7;
  text-decoration: none;
}

nav { display: flex; gap: 0.25rem; }
nav a {
  padding: 0.4rem 0.9rem;
  font-size: 0.75rem;
  color: var(--text-dim);
  border: 1px solid transparent;
  transition: all 0.2s;
  font-family: 'Noto Serif SC', serif;
}
nav a:hover, nav a.active {
  color: var(--accent);
  border-color: var(--border);
  background: var(--surface);
  text-decoration: none;
}

/* Product sections */
.products-section {
  padding: 2rem;
  max-width: 1000px;
  margin: 0 auto;
}

.filter-bar {
  font-size: 0.7rem;
  color: var(--text-dim);
  margin-bottom: 1.5rem;
  text-align: center;
  font-family: 'Noto Serif SC', serif;
}

.filter-option {
  display: inline;
  cursor: pointer;
  transition: color 0.2s;
  font-weight: 400;
}

.filter-option:hover {
  color: var(--accent);
}

.filter-option.active {
  font-weight: 700;
  color: var(--text);
}

.filter-separator {
  margin: 0 0.5rem;
  color: var(--border);
}

.disclaimer {
  background: var(--surface2);
  border-top: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  padding: 1rem 2rem;
  margin: 0;
  font-size: 0.75rem;
  color: var(--text-dim);
  text-align: center;
  font-family: 'Noto Serif SC', serif;
  line-height: 1.6;
}

.section-title {
  font-family: 'Playfair Display', serif;
  font-size: 0.7rem;
  font-weight: 400;
  color: var(--text-dim);
  margin-bottom: 1rem;
  text-align: left;
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 0.8rem;
  margin-top: 1rem;
}

.product-card {
  background: var(--surface);
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  overflow: hidden;
  position: relative;
}

.product-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
}

.product-info-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(8px);
  padding: 0.5rem;
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.3s ease;
  pointer-events: none;
}

.product-card:hover .product-info-overlay {
  opacity: 1;
  transform: translateY(0);
}

.overlay-model {
  font-size: 0.65rem;
  font-weight: 500;
  color: var(--text);
  margin-bottom: 0.2rem;
  font-family: 'Noto Serif SC', serif;
}

.overlay-brand {
  color: var(--accent);
  margin-right: 0.2rem;
  font-family: 'IBM Plex Mono', monospace;
}

.overlay-price {
  font-size: 0.6rem;
  font-weight: 400;
  color: var(--text-dim);
  font-family: 'Space Grotesk', sans-serif;
}

.product-image {
  width: 100%;
  aspect-ratio: 1;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: none;
  padding: 1rem;
  position: relative;
  overflow: hidden;
}

.product-image img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  transition: transform 0.3s ease;
}

.product-card:hover .product-image img {
  transform: scale(1.05);
}

.product-badge {
  position: absolute;
  top: 0.8rem;
  right: 0.8rem;
  background: transparent;
  color: var(--accent);
  padding: 0.2rem 0.6rem;
  font-size: 0.6rem;
  font-family: 'Noto Serif SC', serif;
  letter-spacing: 0.05em;
  font-weight: 600;
  text-shadow: 0 0 8px rgba(255,255,255,0.9), 0 0 4px rgba(255,255,255,0.9);
  z-index: 10;
  pointer-events: none;
}

.product-info {
  padding: 0.3rem;
}

.product-name-line {
  font-size: 0.6rem;
  font-weight: 400;
  color: var(--text);
  margin-bottom: 0.2rem;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: 'Noto Serif SC', serif;
}

.product-brand {
  color: var(--accent);
  font-family: 'IBM Plex Mono', monospace;
  margin-right: 0.3rem;
}

.product-model {
  color: var(--text);
}

.product-category {
  font-size: 0.6rem;
  color: var(--text-dim);
  font-family: 'Noto Serif SC', serif;
  margin-bottom: 0.8rem;
  padding: 0.2rem 0.5rem;
  background: var(--bg);
  border: 1px solid var(--border);
  display: inline-block;
}

.product-price {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 0.6rem;
  font-weight: 400;
  color: var(--text-dim);
  display: flex;
  align-items: baseline;
  gap: 0.1rem;
}

.price-currency {
  font-size: 0.5rem;
}

/* Modal */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.4);
  z-index: 200;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}

.modal-overlay.active { display: flex; }

.modal {
  background: var(--surface);
  border: 1px solid var(--border);
  max-width: 1200px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 12px 40px rgba(0,0,0,0.2);
  display: grid;
  grid-template-columns: 1fr 1fr;
}

.modal-image-section {
  background: #ffffff;
  padding: 3rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-right: 1px solid var(--border);
  position: relative;
}

.modal-image-section img {
  max-width: 100%;
  height: auto;
  object-fit: contain;
}

.modal-gallery-main {
  width: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

.modal-gallery-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid var(--border);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 1.2rem;
  color: var(--text);
  z-index: 10;
}

.modal-gallery-nav:hover {
  background: var(--surface);
  border-color: var(--accent);
  color: var(--accent);
}

.modal-gallery-nav.prev {
  left: -18px;
}

.modal-gallery-nav.next {
  right: -18px;
}

.modal-gallery-thumbs {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 100%;
}

.modal-gallery-thumb {
  width: 60px;
  height: 60px;
  border: 2px solid var(--border);
  cursor: pointer;
  transition: all 0.2s;
  overflow: hidden;
  background: #ffffff;
}

.modal-gallery-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.modal-gallery-thumb:hover {
  border-color: var(--accent);
}

.modal-gallery-thumb.active {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent);
}

.modal-content-section {
  padding: 3rem 2.5rem;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  background: none;
  border: 1px solid var(--border);
  color: var(--text-dim);
  width: 32px;
  height: 32px;
  cursor: pointer;
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  font-family: 'IBM Plex Mono', monospace;
  z-index: 10;
}

.modal-close:hover {
  color: var(--text);
  border-color: var(--text);
  background: var(--bg);
}

.modal-brand {
  font-size: 0.65rem;
  color: var(--accent);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  margin-bottom: 0.5rem;
}

.modal-model {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 1.6rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  line-height: 1.2;
}

.modal-category {
  font-size: 0.7rem;
  color: var(--text-dim);
  font-family: 'Noto Serif SC', serif;
  margin-bottom: 1.5rem;
}

.modal-price {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border);
}

.modal-description {
  font-family: 'Noto Serif SC', serif;
  font-size: 0.85rem;
  line-height: 1.9;
  color: var(--text);
  margin-bottom: 2rem;
}

.modal-description h4 {
  font-family: 'Space Grotesk', sans-serif;
  font-size: 0.9rem;
  font-weight: 600;
  margin: 1.5rem 0 0.8rem;
  color: var(--text);
}

.modal-description h4:first-child {
  margin-top: 0;
}

.modal-description p {
  margin-bottom: 1rem;
  color: var(--text-dim);
}

.modal-description strong {
  color: var(--text);
  font-weight: 600;
}

.modal-specs {
  background: var(--bg);
  border: 1px solid var(--border);
  padding: 1.2rem;
  margin-bottom: 2rem;
}

.modal-specs-title {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 0.65rem;
  color: var(--accent);
  letter-spacing: 0.1em;
  margin-bottom: 0.8rem;
  text-transform: uppercase;
}

.modal-specs-list {
  display: grid;
  gap: 0.5rem;
  font-size: 0.75rem;
  font-family: 'Noto Serif SC', serif;
}

.spec-item {
  display: grid;
  grid-template-columns: 100px 1fr;
  gap: 1rem;
}

.spec-label {
  color: var(--text-dim);
  font-size: 0.7rem;
}

.spec-value {
  color: var(--text);
}

.modal-cta {
  display: inline-block;
  padding: 0.8rem 2rem;
  background: var(--accent);
  color: var(--surface);
  border: none;
  font-family: 'Noto Serif SC', serif;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  letter-spacing: 0.05em;
  width: 100%;
  text-align: center;
}

.modal-cta:hover {
  background: var(--accent-dim);
  text-decoration: none;
}

footer {
  border-top: 1px solid var(--border);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.65rem;
  color: var(--text-dim);
  margin-top: 3rem;
  text-align: center;
}


@media (max-width: 1024px) {
  .modal {
    grid-template-columns: 1fr;
  }

  .modal-image-section {
    border-right: none;
    border-bottom: 1px solid var(--border);
    padding: 2rem;
  }
}

@media (max-width: 768px) {
  header { flex-direction: column; gap: 1rem; }
  .hero { padding: 2rem 1.5rem 1.5rem; }
  .filter-section { padding: 1rem; top: 100px; }
  .filter-row { flex-direction: column; align-items: flex-start; }
  .products-section { padding: 1.5rem 1rem; }
  .products-grid { grid-template-columns: repeat(2, 1fr); }
  .modal-content-section { padding: 2rem 1.5rem; }
}

@media (min-width: 769px) and (max-width: 1024px) {
  .products-grid { grid-template-columns: repeat(3, 1fr); }
}
</style>
</head>
<body>

<div class="disclaimer">
  设计概念，所有产品详情均为 AI 生成，事实错误很多，尚未经过人工核实。产品信息以官方为准。
</div>

<header>
  <div class="logo"><a href="index.html">apov.sg</a><a href="store.html" class="store-part">/store</a></div>
</header>

<section class="products-section">
  <div class="filter-bar">
    <span class="filter-option active" data-category="all">全部产品</span>
    <span class="filter-separator">/</span>
    <span class="filter-option" data-category="portable">超便携</span>
    <span class="filter-separator">/</span>
    <span class="filter-option" data-category="notebook">手写</span>
    <span class="filter-separator">/</span>
    <span class="filter-option" data-category="monitor">显示器</span>
  </div>
  <div class="products-grid" id="productsGrid"></div>
</section>

<footer>
  <div>a project by <a href="https://apov.sg" target="_blank" rel="noopener noreferrer">apov.sg</a></div>
</footer>

<!-- Product detail modal -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <div class="modal-image-section" id="modalImageSection"></div>
    <div class="modal-content-section">
      <button class="modal-close" id="modalClose">×</button>
      <div class="modal-brand" id="modalBrand"></div>
      <div class="modal-model" id="modalModel"></div>
      <div class="modal-category" id="modalCategory"></div>
      <div class="modal-price" id="modalPrice"></div>
      <div class="modal-description" id="modalDescription"></div>
      <div class="modal-specs" id="modalSpecs" style="display:none;">
        <div class="modal-specs-title">核心参数</div>
        <div class="modal-specs-list" id="modalSpecsList"></div>
      </div>
      <a href="#" class="modal-cta" id="modalCTA" target="_blank" rel="noopener noreferrer">了解更多 →</a>
      <a href="#" class="modal-cta" id="modalCatalogLink" style="display:none; margin-top: 0.8rem; background: var(--accent-gold); border-color: var(--accent-gold);" target="_blank" rel="noopener noreferrer">进一步了解这个产品门类 →</a>
    </div>
  </div>
</div>

<script>
// Product data with consumer-focused descriptions
const products = [
  // Monitor category

  {
    id: 5,
    brand: "Dasung",
    brand_cn: "大上",
    model: "Paperlike 13K",
    category: "monitor",
    category_cn: "墨水屏显示器",
    price_cny: "3999",
    price_usd: "$565",
    screen_size: 13.3,
    image: "assets/images/store/dasung_paperlike_13k_bw.png",
    badge: null,
    url: "https://www.dasung.com/",
    specs: {
      "屏幕尺寸": "13.3 英寸",
      "分辨率": "3200×2400",
      "面板类型": "黑白墨水屏",
      "刷新率": "37Hz",
      "接口": "mini-HDMI / USB-C"
    },
    description: `
      <h4>纯粹的黑白阅读体验</h4>
      <p>Paperlike 13K 是彩色版的黑白版本——去掉了 Kaleido 彩色层，只保留纯粹的黑白墨水屏。这意味着<strong>更高的对比度、更清晰的文字、更快的响应速度</strong>，而且价格便宜了 1300 元。如果你不需要彩色功能，这才是真正的最优解。</p>

      <h4>黑白的优势</h4>
      <p>没有 Kaleido 彩色层的遮挡，黑白版的文字显示<strong>对比度更高、边缘更锐利</strong>。对于长时间阅读文字内容（代码、论文、文档）的用户，这种纯粹的黑白显示反而比彩色版更舒服、更不累眼。</p>

      <h4>响应速度更快</h4>
      <p>黑白版的刷新算法不需要处理彩色层，响应速度比彩色版快一点点（虽然提升不大，但能感觉到）。对于需要频繁翻页、滚动的场景，这种流畅度的提升是值得的。</p>

      <h4>3999 元的性价比</h4>
      <p>比彩色版便宜 1300 元，但核心体验（13.3 英寸、3200×2400 分辨率、低延迟）完全一致。如果你确定自己<strong>不需要彩色功能</strong>（只是想要一台护眼的纯文字显示器），这 1300 元省得值得。</p>

      <h4>适合谁？</h4>
      <p>纯文字工作者（作家、程序员、学术研究）、不需要代码高亮的用户、预算有限但想要大上品质的人。不适合：需要彩色 PDF 批注、需要查看彩色图表/思维导图的用户——加 1300 元买彩色版会更实用。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>没有彩色</strong>：这是最大的限制。如果你的工作涉及任何彩色内容（代码高亮、PDF 标注、数据可视化），黑白版会让你怀念彩色。这 1300 元的差价换来的彩色功能，对很多人来说是值得的。</p>
      <p><strong>13.3 英寸依然偏小</strong>：和彩色版一样的尺寸限制。如果需要大屏，<strong>Boox Mira Pro Color 25.3"</strong> 是更好选择（虽然贵很多）。</p>
      <p><strong>刷新率瓶颈</strong>：即使是黑白版，37Hz 的刷新率对于习惯 LCD 的用户来说还是会感到迟滞。这是墨水屏技术的物理限制，短期内无法突破。</p>
      <p><strong>价格依然不便宜</strong>：3999 元已经可以买两台不错的 LCD 显示器。如果只是想试试墨水屏，超便携设备（如 <strong>XTEINK X4</strong> 260 元、<strong>X3</strong> 230 元）是更低成本的尝试方式。</p>
    `
  },
  {
    id: 11,
    brand: "Modos",
    brand_cn: "Modos",
    model: "Enchanter",
    category: "monitor",
    category_cn: "墨水屏显示器",
    price_cny: "4200",
    price_usd: "$599",
    screen_size: 13.3,
    image: "assets/images/store/modos_logo.png",
    badge: null,
    url: "https://www.modos.tech/",
    gallery: [
      "assets/images/store/modos_display/modos_enchanter_01.png",
      "assets/images/store/modos_display/modos_enchanter_02.png",
      "assets/images/store/modos_display/modos_enchanter_03.png",
      "assets/images/store/modos_display/modos_enchanter_04.png",
      "assets/images/store/modos_display/modos_enchanter_05.png",
      "assets/images/store/modos_display/modos_enchanter_06.png"
    ],
    specs: {
      "屏幕尺寸": "13.3 英寸",
      "分辨率": "2400×1600",
      "PPI": "300",
      "面板类型": "E-Ink Carta",
      "刷新率": "60-75Hz",
      "接口": "micro-HDMI / USB-C / DP"
    },
    description: `
      <h4>开源墨水屏显示器的先驱</h4>
      <p>Modos Enchanter 是目前唯一采用<strong>全开源路线</strong>的墨水屏显示器。FPGA 控制器原理图、固件源码和驱动代码全部公开。这不仅是一台显示器，更是一个可以被社区持续改进的平台。</p>

      <h4>60-75Hz：打破墨水屏刷新率天花板</h4>
      <p>通过定制 FPGA 控制器，Enchanter 的目标刷新率达到 60-75Hz——这是传统墨水屏显示器难以企及的水平。虽然仍会有残影，但在流畅度上已经接近低端 LCD 的体验。</p>

      <h4>为什么选择开源？</h4>
      <p>开源意味着你可以根据自己的需求调整刷新算法、优化延迟、甚至开发自定义功能。对于<strong>极客、开发者、注重隐私的用户</strong>来说，这种可控性是封闭产品无法提供的。</p>

      <h4>众筹阶段，值得期待</h4>
      <p>Enchanter 目前处于众筹阶段，预计 2026 年发货。虽然还未量产，但其技术路线和理念已经吸引了大量关注。如果你愿意等待，这可能是未来最具潜力的墨水屏显示器。</p>

      <h4>适合谁？</h4>
      <p>喜欢折腾开源硬件的极客、需要高刷新率的用户、不想被大厂锁定的开发者。不适合：只想要开箱即用的普通用户、需要立即购买的人（目前仍在众筹）。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>尚未量产</strong>：Enchanter 目前仍在众筹阶段，实际体验如何需要等产品发货后才能验证。如果你需要现在就买，大上或文石的成熟产品更稳妥。</p>
      <p><strong>开源门槛</strong>：虽然开源是优势，但对于不懂技术的用户来说，反而可能成为负担。如果你只想要「插上就能用」的体验，封闭系统的产品更省心。</p>
      <p><strong>社区支持待验证</strong>：开源产品的长期价值取决于社区活跃度。如果社区冷清，开源的优势就无法发挥。</p>
      <p><strong>价格竞争激烈</strong>：4200 元的价格与大上 13K 黑白版（3999 元）接近，但大上是成熟量产产品。需要权衡开源灵活性与产品成熟度。</p>
    `
  },
  {
    id: 201,
    brand: "SOTSU",
    brand_cn: "SOTSU",
    model: "FlipAction Elite 16\"",
    category: "monitor",
    category_cn: "便携显示器",
    price_cny: "5830",
    price_usd: "S$1,100",
    screen_size: 16,
    image: "assets/images/store/sotsu_flipaction_elite.png",
    badge: null,
    url: "https://www.sotsu.com/products/flipaction-elite-16",
    specs: {
      "屏幕尺寸": "16 英寸",
      "分辨率": "2560×1600",
      "面板类型": "IPS LCD",
      "刷新率": "60Hz",
      "接口": "USB-C / mini-HDMI",
      "特色": "FlipAction 支架"
    },
    description: `
      <h4>便携显示器中的「真 16 英寸」</h4>
      <p>SOTSU FlipAction 是少数真正做到 16 英寸的便携显示器——不是 15.6 英寸打擦边球，而是实打实的 16 英寸。2560×1600 的分辨率（16:10 比例）意味着<strong>比常见的 1080p 便携屏多出 30% 的垂直空间</strong>，对于需要同时查看多个窗口或处理长文档的用户来说，这是质的提升。</p>

      <h4>FlipAction 支架：被低估的设计</h4>
      <p>大多数便携显示器的支架都很鸡肋，要么角度固定、要么容易倒。SOTSU 的 FlipAction 支架可以<strong>360° 翻转、多角度悬停</strong>，无论是桌面办公、床上使用、还是竖屏阅读，都能找到舒服的角度。这个支架的手感和稳定性明显好于同价位产品。</p>

      <h4>2.5K 分辨率的实用性</h4>
      <p>2560×1600 不是 4K，但对于 16 英寸屏幕来说<strong>PPI 刚好达到视网膜级别（189 PPI）</strong>，文字清晰、图像细腻，同时对电脑性能的要求比 4K 低很多。如果你用的是轻薄本或老款 MacBook，这个分辨率是完美平衡点。</p>

      <h4>单 USB-C 供电+显示</h4>
      <p>支持 USB-C 一线通（供电+显示），如果你的笔记本 USB-C 口支持视频输出，只需要一根线就能连接。对于<strong>数字游民、咖啡厅办公、出差</strong>这些场景，少一根线的体验提升是巨大的。</p>

      <h4>适合谁？</h4>
      <p>需要便携副屏的轻度移动办公用户、MacBook/轻薄本用户、需要竖屏阅读长文档的程序员/研究人员。不适合：追求极致色彩准确度的设计师、需要高刷新率的游戏玩家。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>价格高昂</strong>：5830 元（S$1,100）的售价已经接近中端笔记本电脑的价格。这个定价主要来自 FlipAction 支架的专利设计和 16 英寸真实尺寸。如果预算有限，常规 15.6 英寸便携屏价格通常在 1000-2000 元区间。</p>
      <p><strong>不是真 4K</strong>：2560×1600 只是 2.5K 分辨率。如果你需要真 4K（3840×2160）来做设计或视频剪辑，这不是合适的选择。</p>
      <p><strong>色彩准确度一般</strong>：IPS 面板的色域覆盖和色准比不上专业显示器。如果你是平面设计师或摄影师，需要精确的色彩管理，这块屏幕不适合作为主力工具。</p>
      <p><strong>亮度在户外不够</strong>：便携显示器的通病——最大亮度通常只有 300-400 nits，在强光环境（如户外咖啡厅、阳光直射）下屏幕会发白、难以阅读。</p>
      <p><strong>重量和便携性的权衡</strong>：16 英寸意味着更重、更大。如果你追求极致便携，13.3 英寸的墨水屏显示器会更轻便。FlipAction 更适合「固定在酒店/咖啡厅办公」而不是「背包里随时拿出来」。</p>
    `
  },

  // Portable category - Devices with mockup
  {
    id: 106,
    brand: "M5Stack",
    brand_cn: "M5Stack",
    model: "Paper S3",
    category: "portable",
    category_cn: "超便携墨水屏",
    price_cny: "399",
    price_usd: "$55",
    screen_size: 4.7,
    image: "assets/images/store/m5_paper_s3.webp",
    badge: null,
    url: "https://shop.m5stack.com/pages/search-results-page?q=paper+s3",
    specs: {
      "屏幕尺寸": "4.7 英寸",
      "分辨率": "960×540",
      "处理器": "ESP32-S3",
      "系统": "开源固件",
      "特色": "可编程"
    },
    description: `
      <h4>这不是一台「成品」，而是一个「可能性」</h4>
      <p>M5Stack Paper S3 不是传统意义上的电子书阅读器，它是一块<strong>搭载墨水屏的开发板</strong>。如果你懂一点编程，它可以变成任何你想要的东西：电子书阅读器、待办清单、股票显示器、天气预报屏、甚至是智能家居控制面板。</p>

      <h4>edcbook 固件：开箱即用的阅读体验</h4>
      <p>不想折腾？社区开发的 <strong>edcbook 固件</strong>可以让它秒变一台功能完整的电子书阅读器。支持 EPUB、PDF、TXT，还有书签、进度同步等功能。而且因为是开源项目，社区一直在持续更新。</p>

      <h4>4.7 英寸：口袋里的极客玩具</h4>
      <p>这个尺寸刚好可以放进外套口袋。虽然不如 6 英寸阅读器舒服，但作为「随身携带的第二屏」，它足够了。而且<strong>重量只有 120g</strong>，挂在包上完全无感。</p>

      <h4>为什么价格这么便宜？</h4>
      <p>因为它本质上是一块开发板，没有精致的外壳、没有复杂的操作系统、没有品牌溢价。但如果你愿意动手，它的可玩性远超那些「封闭式」的商业产品。</p>

      <h4>适合谁？</h4>
      <p>动手能力强的极客、喜欢折腾开源硬件的 DIY 爱好者、想要一个可编程墨水屏终端的开发者。不适合：只想要开箱即用、不想折腾的普通用户。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>需要动手配置</strong>：虽然有 edcbook 固件，但刷固件、配置系统对于非技术用户来说还是有门槛的。如果你只想要「买来就能用」的体验，<strong>XTEINK X4</strong> 或 <strong>Obook5</strong> 是更好的选择。</p>
      <p><strong>4.7 英寸屏幕偏小</strong>：对于长时间阅读书籍，这个尺寸还是有点吃力。如果你需要更舒适的阅读体验且不介意略大一点，6 英寸的主流阅读器（如 Kindle Paperwhite）会更合适。</p>
      <p><strong>社区支持有限</strong>：相比 Kindle、Kobo 等成熟生态，edcbook 社区的资源和教程还相对较少。遇到问题可能需要自己摸索或在小众论坛求助。</p>
      <p><strong>硬件做工一般</strong>：作为开发板，Paper S3 的外壳和做工比不上商业阅读器。如果你在意手感和质感，这不是最佳选择。</p>
    `
  },
  {
    id: 108,
    brand: "XTEINK",
    brand_cn: "阅星曈",
    model: "X4",
    category: "portable",
    category_cn: "超便携墨水屏",
    price_cny: "260",
    price_usd: "$37",
    screen_size: 4.3,
    image: "assets/images/store/xteink-x4.webp",
    badge: null,
    url: "https://mall.jd.com/index-19747042.html",
    specs: {
      "屏幕尺寸": "4.3 英寸",
      "分辨率": "800×600",
      "重量": "75.8g",
      "厚度": "5.9mm",
      "特色": "磁吸设计"
    },
    description: `
      <h4>260 元的超高性价比</h4>
      <p>这可能是市场上<strong>性价比最高的墨水屏阅读器</strong>。260 元的价格，买到的不仅是一块墨水屏，更是一种「随时随地阅读」的可能性。扔包里、放口袋、吸在手机背面，完全不用心疼。</p>

      <h4>磁吸设计：最被低估的创新</h4>
      <p>X4 的磁吸设计看起来像个噱头，但实际用起来会发现它的妙处：<strong>吸在手机壳背面</strong>，通勤路上单手阅读；吸在冰箱上，变成厨房菜谱；吸在床头，睡前阅读不用找地方放。这种灵活性是传统阅读器做不到的。</p>

      <h4>4.3 英寸：刚好够用</h4>
      <p>这个尺寸对于小说、轻量阅读来说完全够用。虽然看 PDF 会有点吃力，但作为「碎片时间阅读终端」，它的便携性优势远大于屏幕尺寸的劣势。而且<strong>重量只有 75.8g</strong>，比一部手机还轻。</p>

      <h4>封闭系统的优缺点</h4>
      <p>X4 采用封闭式系统，不能安装第三方 App，只能通过文件传输导入书籍。这对于喜欢折腾的用户是缺点，但对于「只想安静看书」的用户来说，反而是优点——<strong>没有诱惑，没有干扰，只有阅读</strong>。</p>

      <h4>适合谁？</h4>
      <p>预算有限的学生、想要第二台备用阅读器的轻度用户、追求极致便携性的通勤族。不适合：需要大屏看 PDF 的学术用户、想要丰富功能的重度阅读爱好者。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>4.3 英寸屏幕的阅读局限</strong>：虽然便携，但长时间阅读小说还是会觉得屏幕太小、翻页频繁。如果预算允许多加约 90 元，<strong>Obook5</strong>（349 元）的 4.26 英寸屏幕虽然尺寸相近，但实际阅读体验和做工会更好。</p>
      <p><strong>封闭系统限制</strong>：无法安装第三方 App（如微信读书、Kindle），只能通过传输本地文件。如果你的书库主要在这些平台上，使用会很不方便。</p>
      <p><strong>磁吸设计的实用性存疑</strong>：虽然创意十足，但实际使用中可能会发现磁吸不够稳固、容易脱落。如果你主要是正常手持阅读，这个卖点意义不大。</p>
      <p><strong>没有前光</strong>：在弱光环境下无法阅读，这对于睡前阅读的用户是个问题。如果你需要前光功能，同价位的其他产品可能没有，但多花 100 元的 <strong>Obook5</strong> 有 20 级前光。</p>
    `
  },
  {
    id: 109,
    brand: "XTEINK",
    brand_cn: "阅星曈",
    model: "X3",
    category: "portable",
    category_cn: "超便携墨水屏",
    price_cny: "230",
    price_usd: "$32",
    screen_size: 3.7,
    image: "assets/images/store/xteink_x3.webp",
    badge: null,
    url: "https://mall.jd.com/index-19747042.html",
    specs: {
      "屏幕尺寸": "3.7 英寸",
      "分辨率": "800×480",
      "重量": "约 60g",
      "系统": "封闭系统",
      "特色": "超小屏"
    },
    description: `
      <h4>这不是一台阅读器，这是一张「电子便签」</h4>
      <p>3.7 英寸的屏幕，对于传统阅读来说确实太小了。但如果换个角度，把它当作<strong>一张可以无限书写、随身携带的电子便签</strong>，你会发现它的价值：记录灵感、临时备忘、碎片化阅读短文章。</p>

      <h4>真正的口袋尺寸</h4>
      <p>X3 可能是市面上<strong>最小、最轻的墨水屏设备</strong>之一。60g 的重量、3.7 英寸的尺寸，可以轻松放进任何口袋，甚至可以挂在钥匙链上。这种便携性是 6 英寸阅读器永远做不到的。</p>

      <h4>极简主义的美学</h4>
      <p>没有复杂的功能、没有花哨的界面，X3 就是一个<strong>纯粹的文字显示工具</strong>。这种极简反而让它有了独特的吸引力——在这个功能过载的时代，有一台设备只做一件事，反而是一种奢侈。</p>

      <h4>230 元：超便携的入门之选</h4>
      <p>如果你只是想尝试一下「墨水屏阅读」的感觉，又不想花大价钱，X3 是性价比很高的试水产品。即使最后发现不适合自己，也不会太心疼。</p>

      <h4>适合谁？</h4>
      <p>极简主义爱好者、喜欢随身携带笔记本的人、想要一个「纯粹阅读工具」的用户。不适合：需要看长篇书籍或 PDF 的用户、追求大屏体验的人。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>3.7 英寸太小了</strong>：这是最大的问题。即使是阅读短文，800×480 的分辨率和 3.7 英寸的屏幕也会让长时间使用很吃力。如果你发现自己经常眯眼或频繁翻页，多花 30 元升级到 <strong>X4</strong>（260 元，4.3 英寸）会有明显改善。</p>
      <p><strong>功能极度精简</strong>：封闭系统 + 超小屏幕意味着它几乎只能用来看纯文字内容。想看漫画、杂志、带图片的文章？基本不可能有好体验。</p>
      <p><strong>电池容量未知</strong>：官方没有公布电池容量，从体积推测应该很小。虽然墨水屏省电，但如果你是重度用户，可能需要比想象中更频繁地充电。</p>
      <p><strong>极简主义的代价</strong>：没有前光、没有触摸（待确认）、没有扩展功能。如果你后来发现需要这些功能，这台设备基本没有升级空间，只能换机。建议先想清楚自己是「真极简」还是「觉得极简很酷」。</p>
    `
  },
  {
    id: 107,
    brand: "OBOOK",
    brand_cn: "国文",
    model: "Obook5",
    category: "portable",
    category_cn: "超便携墨水屏",
    price_cny: "349",
    price_usd: "$49",
    screen_size: 4.26,
    image: "assets/images/store/guowen_OBOOK5.png",
    badge: null,
    url: "https://mall.jd.com/index-169704.html",
    specs: {
      "屏幕尺寸": "4.26 英寸",
      "分辨率": "800×600",
      "重量": "约 90g",
      "特色": "快速翻页"
    },
    description: `
      <h4>国文 S2 的升级版</h4>
      <p>Obook5 是国文 S2 的 2025 重新发布版，保持了<strong>4.26 英寸的便携尺寸</strong>，同时在系统和翻页速度上进行了优化。轻巧的机身可以轻松塞进口袋或夹在笔记本里，是日常通勤的好伴侣。</p>

      <h4>4.26 英寸：便携性和可读性的平衡点</h4>
      <p>比 3.7 英寸的 X3 大一点，看书更舒服；比 6 英寸的主流阅读器小一点，更便携。这个尺寸对于<strong>小说、散文、短篇文章</strong>来说是最佳选择。虽然看 PDF 还是有点吃力，但作为日常通勤阅读器，完全够用。</p>

      <h4>快速翻页：国文的独家优化</h4>
      <p>国文在系统优化上下了功夫，Obook5 的翻页速度明显快于同价位产品。虽然比不上旗舰级阅读器，但在便携设备这个类别里，它的流畅度是数一数二的。</p>

      <h4>349 元：中端便携的均衡之选</h4>
      <p>比 X3/X4 贵一些，但多花的钱换来了更大的屏幕、更好的做工、更快的翻页。如果你的预算在 350 元左右，想要一台<strong>真正可以作为主力便携阅读器</strong>的设备，Obook5 是值得考虑的选择。</p>

      <h4>适合谁？</h4>
      <p>预算在 300 元左右、需要一台「能随身带、舒服看」的阅读器的用户。不适合：需要看 PDF 的学术用户、想要彩色屏或更大屏幕的人。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>系统封闭性</strong>：无法安装微信读书、Kindle 等第三方 App，只能通过 USB 传输本地文件。如果你的主要阅读来源是这些平台的在线书库，使用体验会大打折扣。</p>
      <p><strong>4.26 英寸依然偏小</strong>：虽然比 X3/X4 大，但对于看 PDF、漫画、杂志来说还是太小。如果你的阅读需求不局限于纯文字小说，6 英寸的主流阅读器（虽然便携性差一点）会更合适。</p>
      <p><strong>品牌知名度低</strong>：国文不如大厂（Kindle、Boox）那样有完善的售后和社区支持。遇到问题可能需要自己摸索，固件更新频率也可能不如大品牌。</p>
      <p><strong>翻页速度的上限</strong>：虽然在便携设备中算快，但和旗舰级墨水屏显示器（如 <strong>Paperlike 13K Color</strong>）相比还是有明显差距。如果你对响应速度很敏感，这个价位的产品都会让你感到迟滞。</p>
    `
  },
  {
    id: 110,
    brand: "Boox",
    brand_cn: "文石",
    model: "Palma 2 Pro",
    category: "portable",
    category_cn: "超便携墨水屏",
    price_cny: "1699",
    price_usd: "$239",
    screen_size: 6.13,
    image: "assets/images/store/boox_palma_2_pro.webp",
    badge: null,
    url: "https://shop.boox.com/",
    specs: {
      "屏幕尺寸": "6.13 英寸",
      "分辨率": "1648×824",
      "处理器": "八核 2.4GHz",
      "系统": "Android 13",
      "特色": "手机形态、可安装 App"
    },
    description: `
      <h4>手机形态的开放式墨水屏阅读器</h4>
      <p>Boox Palma 2 Pro 是一台<strong>「长得像手机的墨水屏阅读器」</strong>——6.13 英寸屏幕、可以装进口袋、基于 Android 13 系统可以安装各种 App。如果你想要一台既能看书、又能当备用手机使用的设备，Palma 2 Pro 是目前最成熟的选择。</p>

      <h4>手机形态的优势</h4>
      <p>不同于传统的砖头形电子书阅读器，Palma 2 Pro 的尺寸和重量接近手机，可以<strong>单手持握、随时掏出来阅读</strong>。6.13 英寸的屏幕比手机大一点，但又不会像 7 英寸阅读器那样装不进口袋。</p>

      <h4>开放的 Android 系统</h4>
      <p>基于 Android 13，你可以安装微信读书、Kindle、得到、甚至浏览器。这是封闭系统的阅读器（如 Kindle、Kobo）做不到的。想看网文？装个起点 App。想听播客？装个小宇宙。<strong>所有内容都能在墨水屏上护眼阅读</strong>。</p>

      <h4>八核处理器 + BSR 刷新</h4>
      <p>2.4GHz 八核处理器让 Palma 2 Pro 的响应速度明显快于传统电子书阅读器。配合文石的 BSR 刷新算法，翻页流畅、滑动跟手，甚至可以勉强看视频（虽然体验一般）。</p>

      <h4>适合谁？</h4>
      <p>需要一台能装 App 的墨水屏阅读器的用户、想要减少手机使用但又离不开某些 App 的人、追求便携性的通勤族。不适合：只想要纯粹阅读体验（开放系统会带来诱惑）、预算有限的用户。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>价格偏高</strong>：1699 元的价格已经可以买一台不错的 Android 手机。如果你只是想要一台纯粹的阅读器，Kindle Paperwhite（999 元）或 <strong>XTEINK X4</strong>（260 元）性价比更高。</p>
      <p><strong>6.13 英寸的尴尬</strong>：比手机大、比阅读器小。看 PDF 会觉得屏幕太小需要频繁缩放，但又没有 7 英寸阅读器那么舒服。这个尺寸是便携性和可读性的妥协。</p>
      <p><strong>开放系统的诱惑</strong>：虽然能装 App 是优势，但也意味着更多干扰。如果你容易分心，可能会发现自己在墨水屏上刷微博、看抖音——这就失去了「专注阅读」的初衷。</p>
      <p><strong>续航不如传统阅读器</strong>：Android 系统 + 后台 App 意味着耗电量比 Kindle 高很多。虽然官方宣称数周续航，但如果你频繁使用 App、联网，可能几天就要充电。</p>
      <p><strong>没有通话功能</strong>：虽然长得像手机，但 Palma 2 Pro 不能打电话、不能插 SIM 卡。如果你想要一台「能打电话的墨水屏设备」，目前市场上没有完美方案。</p>
    `
  },
  {
    id: 402,
    brand: "Supernote",
    brand_cn: "超级笔记",
    model: "Nomad",
    category: "notebook",
    category_cn: "手写笔记",
    price_cny: "2800",
    price_usd: "$399",
    screen_size: 10.7,
    image: "assets/images/store/supernote_nomad.webp",
    badge: null,
    url: "https://supernote.com/",
    specs: {
      "屏幕": "10.7 英寸墨水屏",
      "分辨率": "1872×1404",
      "手写延迟": "7ms",
      "电池续航": "2-3 周",
      "特色": "陶瓷笔尖、无需充电笔"
    },
    description: `
      <h4>最接近纸笔体验的电子笔记本</h4>
      <p>Supernote Nomad 是目前市场上<strong>「手写体验最好」</strong>的电子墨水屏笔记本——不是之一，就是最好。7ms 的手写延迟、陶瓷笔尖的摩擦感、无需充电的电磁笔，这些技术细节加起来，造就了一种「写在纸上」的错觉。</p>

      <h4>7ms 延迟：真正跟手的笔</h4>
      <p>大多数电子笔记本（包括 iPad + Apple Pencil）的手写延迟在 20-30ms，你能明显感觉到笔尖和屏幕显示之间的「脱节」。Nomad 的 7ms 延迟<strong>几乎消除了这种脱节感</strong>，写字时的流畅度接近真实纸笔。</p>

      <h4>陶瓷笔尖 + 类纸膜</h4>
      <p>Supernote 的笔尖是陶瓷材质，配合屏幕上的类纸膜，写字时有真实的摩擦感和阻尼——不是光滑的玻璃感，而是铅笔在纸上的「沙沙声」。这种触感对于长时间手写来说至关重要。</p>

      <h4>10.7 英寸：A5 纸张大小</h4>
      <p>10.7 英寸接近 A5 纸的尺寸，单页可以写下足够多的内容，同时不会像 13.3 英寸设备那样笨重。这是便携性和可用性的最佳平衡点。</p>

      <h4>无限存储 + 云同步</h4>
      <p>不用担心「写满了」——电子笔记本的存储空间几乎无限，可以同步到云端（Dropbox、Google Drive）。这是纸质笔记本永远做不到的。</p>

      <h4>适合谁？</h4>
      <p>大量手写笔记的人（学生、研究人员、创作者）、需要检索和整理笔记的用户、想要减少纸张消耗的环保主义者。不适合：只是偶尔记笔记（买纸质本就行）、需要彩色笔记的人。</p>

      <h4>局限性与潜在改进空间</h4>
      <p><strong>价格高昂</strong>：2800 元的价格可以买 23 本 Leuchtturm 笔记本。虽然长期来看电子笔记本更环保、更易管理，但初始投入确实很高。如果你不确定自己会不会长期使用，这是一个风险。</p>
      <p><strong>墨水屏的刷新问题</strong>：虽然手写延迟只有 7ms，但墨水屏的整体刷新速度依然比不上纸张或 iPad。翻页、缩放、移动笔记时会有明显的「闪烁」和延迟。</p>
      <p><strong>只有黑白</strong>：墨水屏意味着没有彩色笔记、没有彩色标注。如果你习惯用不同颜色的笔做标记（如康奈尔笔记法、思维导图），这会是个限制。iPad + Apple Pencil 在这方面更灵活。</p>
      <p><strong>软件生态有限</strong>：Supernote 的系统相对封闭，不能安装第三方 App（如 Notability、GoodNotes）。如果你需要更丰富的功能（如 OCR 手写识别、录音同步），iPad 是更好的选择。</p>
      <p><strong>屏幕容易刮花</strong>：类纸膜虽然提供了好的手感，但也意味着屏幕更容易被刮花。陶瓷笔尖长期使用会在屏幕上留下痕迹，虽然不影响功能，但强迫症用户会不舒服。</p>
    `
  }
];

function renderProducts(category = 'all') {
  // Filter products by category
  let filteredProducts = category === 'all' ? [...products] : products.filter(p => p.category === category);

  // Shuffle products randomly (Fisher-Yates shuffle)
  for (let i = filteredProducts.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [filteredProducts[i], filteredProducts[j]] = [filteredProducts[j], filteredProducts[i]];
  }

  // Render all products in one grid
  const productsGrid = document.getElementById('productsGrid');
  productsGrid.innerHTML = '';
  filteredProducts.forEach(p => {
    productsGrid.appendChild(createProductCard(p));
  });
}

// Create product card element
function createProductCard(p) {
  const card = document.createElement('div');
  card.className = 'product-card';
  card.onclick = () => openProductModal(p);

  card.innerHTML = `
    <div class="product-image">
      <img src="${p.image}" alt="${p.model}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 font-family=%22monospace%22 font-size=%2214%22 fill=%22%23ccc%22%3EIMG%3C/text%3E%3C/svg%3E'">
    </div>
    <div class="product-info-overlay">
      <div class="overlay-model">
        <span class="overlay-brand">${p.brand_cn}</span>
        <span>${p.model}</span>
      </div>
      <div class="overlay-price">¥${p.price_cny}</div>
    </div>
  `;

  return card;
}

// Render a single product (kept for compatibility)
function renderSingleProduct(p) {
  const grid = document.getElementById('productsGrid');
  if (!grid) return;

  grid.innerHTML = '';
  const filtered = [p];
  filtered.forEach(p => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.onclick = () => openProductModal(p);

    const badgeHTML = p.badge ? `<div class="product-badge">${p.badge}</div>` : '';

    // This code is now handled by createProductCard
  });
}

// Gallery state
let currentGalleryIndex = 0;
let currentGallery = [];

// Open product modal
function openProductModal(p) {
  document.getElementById('modalBrand').textContent = p.brand + (p.brand_cn !== p.brand ? ' ' + p.brand_cn : '');
  document.getElementById('modalModel').textContent = p.model;
  document.getElementById('modalCategory').textContent = p.category_cn;
  document.getElementById('modalPrice').textContent = `¥${p.price_cny}`;
  document.getElementById('modalDescription').innerHTML = p.description;

  // Image or Gallery
  const imageSection = document.getElementById('modalImageSection');
  if (p.gallery && p.gallery.length > 0) {
    // Multi-image gallery
    currentGallery = p.gallery;
    currentGalleryIndex = 0;
    renderGallery();
  } else {
    // Single image
    currentGallery = [];
    imageSection.innerHTML = `<img src="${p.image}" alt="${p.model}">`;
  }

  // Specs
  if (p.specs) {
    const specsEl = document.getElementById('modalSpecs');
    const specsList = document.getElementById('modalSpecsList');
    let specsHTML = '';
    for (const [label, value] of Object.entries(p.specs)) {
      specsHTML += `
        <div class="spec-item">
          <div class="spec-label">${label}</div>
          <div class="spec-value">${value}</div>
        </div>
      `;
    }
    specsList.innerHTML = specsHTML;
    specsEl.style.display = 'block';
  } else {
    document.getElementById('modalSpecs').style.display = 'none';
  }

  // CTA
  const cta = document.getElementById('modalCTA');
  cta.href = p.url;

  // Catalog link - show only for e-paper monitor and portable categories
  const catalogLink = document.getElementById('modalCatalogLink');
  if (p.category === 'monitor' && p.category_cn.includes('墨水屏')) {
    catalogLink.href = 'catalog-monitor.html';
    catalogLink.textContent = '进一步了解电子纸显示器门类 →';
    catalogLink.style.display = 'inline-block';
  } else if (p.category === 'portable') {
    catalogLink.href = 'catalog-ultra-portable.html';
    catalogLink.textContent = '进一步了解超便携阅读器门类 →';
    catalogLink.style.display = 'inline-block';
  } else {
    catalogLink.style.display = 'none';
  }

  document.getElementById('modalOverlay').classList.add('active');

  // Reset scroll position to top when opening a new modal
  const modal = document.querySelector('.modal');
  if (modal) {
    modal.scrollTop = 0;
  }
}

// Render gallery
function renderGallery() {
  const imageSection = document.getElementById('modalImageSection');

  let thumbsHTML = '';
  currentGallery.forEach((img, idx) => {
    const activeClass = idx === currentGalleryIndex ? 'active' : '';
    thumbsHTML += `<div class="modal-gallery-thumb ${activeClass}" onclick="changeGalleryImage(${idx})"><img src="${img}" alt="图片${idx + 1}"></div>`;
  });

  const navHTML = currentGallery.length > 1 ? `
    <div class="modal-gallery-nav prev" onclick="prevGalleryImage()">‹</div>
    <div class="modal-gallery-nav next" onclick="nextGalleryImage()">›</div>
  ` : '';

  imageSection.innerHTML = `
    <div class="modal-gallery-main">
      ${navHTML}
      <img src="${currentGallery[currentGalleryIndex]}" alt="产品图片">
    </div>
    ${currentGallery.length > 1 ? `<div class="modal-gallery-thumbs">${thumbsHTML}</div>` : ''}
  `;
}

// Gallery navigation
function changeGalleryImage(index) {
  currentGalleryIndex = index;
  renderGallery();
}

function nextGalleryImage() {
  currentGalleryIndex = (currentGalleryIndex + 1) % currentGallery.length;
  renderGallery();
}

function prevGalleryImage() {
  currentGalleryIndex = (currentGalleryIndex - 1 + currentGallery.length) % currentGallery.length;
  renderGallery();
}

// Modal close
document.getElementById('modalClose').addEventListener('click', () => {
  document.getElementById('modalOverlay').classList.remove('active');
});

document.getElementById('modalOverlay').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) {
    e.currentTarget.classList.remove('active');
  }
});

// Filter functionality
document.querySelectorAll('.filter-option').forEach(option => {
  option.addEventListener('click', function() {
    // Update active state
    document.querySelectorAll('.filter-option').forEach(opt => opt.classList.remove('active'));
    this.classList.add('active');

    // Render products with selected category
    const category = this.getAttribute('data-category');
    renderProducts(category);
  });
});

// Initial render
renderProducts();
</script>

</body>
</html>
